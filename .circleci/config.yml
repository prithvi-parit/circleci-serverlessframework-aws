version: 2.1
orbs:
   aws-cli: circleci/aws-cli@1.0
   serverless: circleci/serverless-framework@1.0
jobs:
  build-and-deploy:
    executor: serverless/default
    #docker:
     # - image: circleci/node:latest
    steps:
      - checkout
      - aws-cli/setup
      - serverless/setup
    #  - run:
   #       command: sudo npm i -g serverless npm@latest
   #   - run:
    #      command: npm install
   
      - run:
          command: chmod +x ./.circleci/install-credentials.sh
      - run:
          command: ./.circleci/install-credentials.sh
      - run:
          command: sls deploy

workflows:
    build-and-deploy:
      jobs:
        - build-and-deploy:
              context: serverlessProject
